<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>ESP8266 Smart Sensor</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
  font-family: Arial;
  background:#111;
  color:white;
  text-align:center;
}
.card{
  background:#1e1e1e;
  padding:20px;
  margin:15px auto;
  width:300px;
  border-radius:15px;
}
button{
  padding:10px 20px;
  margin:5px;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
}
.on{background:#00c853;color:white;}
.off{background:#d50000;color:white;}
.big{font-size:30px;font-weight:bold;}
</style>
</head>

<body>

<h2>ðŸŒ± Smart Plant Monitor</h2>

<div class="card">
<h3>ðŸ’§ Soil</h3>
<div id="soil" class="big">-- %</div>
</div>

<div class="card">
<h3>ðŸŒ¡ Temperature</h3>
<div id="temp" class="big">-- Â°C</div>
</div>

<div class="card">
<h3>ðŸš¨ Alarm Status</h3>
<div id="alarm" class="big">--</div>
</div>

<div class="card">
<h3>ðŸŽ› Control</h3>
<button class="on" onclick="alarmOn()">ðŸ”Š à¹€à¸›à¸´à¸” Alarm</button>
<button class="off" onclick="alarmOff()">ðŸ”‡ à¸›à¸´à¸” Alarm</button>
</div>

<script>

/* ===== firebase config ===== */
var firebaseConfig = {
apiKey: "AIzaSyC1a-XkNqLQ-fR9K9G3rRq4H3k9SKw9EF0",
databaseURL: "https://kjszz-1a818-default-rtdb.firebaseio.com/"
};

firebase.initializeApp(firebaseConfig);
var db = firebase.database();

/* ===== realtime sensor ===== */
db.ref("/sensor").on("value", function(snapshot){

var data = snapshot.val();
if(!data) return;

document.getElementById("soil").innerText =
data.soil + " %";

document.getElementById("temp").innerText =
data.temperature.toFixed(1) + " Â°C";

document.getElementById("alarm").innerText =
data.alarm ? "ðŸ”´ ALARM ON" : "ðŸŸ¢ NORMAL";

});

/* ===== control ===== */
function alarmOn(){
db.ref("/control/enable").set(true);
}

function alarmOff(){
db.ref("/control/enable").set(false);
}

</script>

</body>
</html>
