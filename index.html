<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>ESP8266 Alarm Control</title>

<!-- Firebase v8 (à¹€à¸‚à¹‰à¸²à¸à¸±à¸šà¸—à¸µà¹ˆà¸„à¸¸à¸“à¹ƒà¸Šà¹‰) -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
  font-family: sans-serif;
  background:#111;
  color:white;
  text-align:center;
  padding-top:80px;
}
button{
  font-size:22px;
  padding:15px 30px;
  border:none;
  border-radius:10px;
  margin:10px;
  cursor:pointer;
}
.on{background:#e74c3c;}
.off{background:#2ecc71;}
.card{
  background:#222;
  padding:40px;
  width:300px;
  margin:auto;
  border-radius:15px;
}
</style>
</head>

<body>

<div class="card">
<h2>ðŸ”” à¸„à¸§à¸šà¸„à¸¸à¸¡ Buzzer</h2>

<button class="on" onclick="setAlarm(true)">à¹€à¸›à¸´à¸”à¹€à¸ªà¸µà¸¢à¸‡</button>
<button class="off" onclick="setAlarm(false)">à¸›à¸´à¸”à¹€à¸ªà¸µà¸¢à¸‡</button>

<p id="status">à¸ªà¸–à¸²à¸™à¸°: -</p>
</div>

<script>

/* ===== Firebase Config (à¹ƒà¸ªà¹ˆà¸‚à¸­à¸‡à¹‚à¸›à¸£à¹€à¸ˆà¸„à¸„à¸¸à¸“) ===== */
var firebaseConfig = {
  apiKey: "AIzaSyC1a-XkNqLQ-fR9K9G3rRq4H3k9SKw9EF0",
  databaseURL: "https://kjszz-1a818-default-rtdb.firebaseio.com/"
};

firebase.initializeApp(firebaseConfig);
var db = firebase.database();

/* ===== à¸ªà¹ˆà¸‡à¸„à¸³à¸ªà¸±à¹ˆà¸‡ ===== */
function setAlarm(state){
  db.ref("/control/enable").set(state);
}

/* ===== à¸­à¹ˆà¸²à¸™à¸ªà¸–à¸²à¸™à¸° realtime ===== */
db.ref("/control/enable").on("value",function(snapshot){
  document.getElementById("status").innerText =
  "à¸ªà¸–à¸²à¸™à¸°: " + (snapshot.val() ? "ðŸ”´ à¹€à¸›à¸´à¸”à¸­à¸¢à¸¹à¹ˆ" : "ðŸŸ¢ à¸›à¸´à¸”à¸­à¸¢à¸¹à¹ˆ");
});

</script>

</body>
</html>
